define("modular/errors",["underscore"],function(){var a={},b=require("underscore");return a.WrongArgumentsError=function(){this.message="Wrong arguments. Required argument `options` must be an  Object. Required argument `callback` must be a Function."},a.InvalidRootElementError=function(a){this.message='Invalid root element. options.$el must match the following selector: "'+a+'".'},a.MissingElementError=function(){this.message="Required option `$el` is missing."},a.MissingConfigurationError=function(a){this.message='Global configuration object for key "'+a+'" not found.'},a.MissingDefinitionError=function(){this.message="Missing definition string for some modules."},a.FailedToLoadDefinitionError=function(a){this.message="Some definitions failed to load.\n"+a.message},b.each(a,function(a){a.prototype=new Error}),a}),define("modular",["require","underscore","jquery","transform","modular/errors","backbone.marionette"],function(a){function b(a,b){var g,h,i,m;if(!l.isObject(a)||!l.isFunction(b))throw new o.WrongArgumentsError;return a.$el?q(a.$el).isValid()?l.isString(a.configKey)&&l.isUndefined(window[a.configKey])?b(new o.MissingConfigurationError(a.configKey)):(g=k(a.configKey),i=l.partial(j,g),h=l.chain(f(u(a.$el),[])).reduce(i,[]).value(),m=l.chain(h).pluck("definition").uniq().value(),e(m)?b(new o.MissingDefinitionError):void d(m,function(){b(null,c(h))},function(a){b(new o.FailedToLoadDefinitionError(a))})):b(new o.InvalidRootElementError(q.selector())):b(new o.MissingElementError)}function c(b){var c=new p.Application,d={};return l.each(b,function(b){d[b.shortName]=b.data,c.module(b.name,a(b.definition))}),{app:c,options:d}}function d(b,c,d){var e=!1;a(b,c,function(a){e||(d(a),e=!0)})}function e(a){return l.some(a,function(a){return!a})}function f(a,b){var c=b.concat(a);return l.reduce(a.children,function(a,b){return a.concat(f(b,c))},[c])}function g(a){return m(a.el).attr("data-name")||l.uniqueId("unnamed-")}function h(a){return r(a.el).value()||void 0}function i(a){return l.reduce(a,function(a,b){return a.concat(g(b))},[]).join(".")}function j(a,b,c){var d;return 1===c.length?b:(d=l.last(c),d.name=i(c.slice(1)),d.data=a(g(d)),d.shortName=g(d),d.definition=h(d),b.concat(d))}function k(a){var b=window[a]||{};return function(a){return b[a]||{}}}var l=a("underscore"),m=a("jquery"),n=a("transform"),o=a("modular/errors"),p=a("backbone.marionette"),q=n.selector("app"),r=n.selector("module"),s=n.rule(q,[r]),t=n.rule(r,[r]),u=n([s,t]);return l.each(o,function(a,c){b[c]=a}),b});
//# sourceMappingURL=modular.min.js.map